pipeline {
    agent any 

    stages {
        stage('Build') { 
            steps { 
                	withMaven(maven : 'hmaven') 
			sh 'mvn clean' 
                                                   }
                   }
                        
stage('Test'){
            steps {
                withMaven(maven : 'hmaven') 
		sh 'mvn test'
                			   
                  }
               }
        stage('Deploy') {
            steps {
                 withMaven(maven : 'hmaven') 
		 sh 'make publish'
            				    
                  }
                        }
	}
}